<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title><?
if(isset($this->page_title)) {
    echo $this->page_title." - ";
}
echo config()->app_name;
?></title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="images/myosg_favi.ico" rel="icon" type="image/x-icon" />

<link href="<?=base()?>/css/emerald/default.css" rel="stylesheet" type="text/css" />
<link href="<?=base()?>/css/myosg.css.php" rel="stylesheet" type="text/css" />
<link href="<?=base()?>/lib/jquery-1.3.1/theme/ui.all.css" rel="stylesheet" type="text/css" />
<script type='text/javascript' src='<?=base()?>/lib/jquery-1.3.1/jquery-1.3.1.js'></script>
<script type='text/javascript' src='<?=base()?>/lib/jquery-1.3.1/jquery.ui.all.js'></script>
<script type="text/javascript">
var query = {};
function uwa() { return false; }
function parseQuery() {
    var q = window.location.search.substring(1);
    var vars = q.split("&");
    for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if(pair.length == 2) {
            query[pair[0]] = pair[1];
        }
    }
}
parseQuery();
</script>

<SCRIPT LANGUAGE="JavaScript">
<!--

var scroll = (window.scrollTo) ? 1 : 0;

function setCookie(name, value, expires, path, domain, secure) {
  var curCookie = name + "=" + escape(value) +
    ((expires) ? "; expires=" + expires.toGMTString() : "") +
    ((path) ? "; path=" + path : "") +
    ((domain) ? "; domain=" + domain : "") +
    ((secure) ? "; secure" : "");
  document.cookie = curCookie;
}

function getCookie(name) {
  var dc = document.cookie;
  var prefix = name + "=";
  var begin = dc.indexOf("; " + prefix);
  if (begin == -1) {
    begin = dc.indexOf(prefix);
    if (begin != 0) return null;
  } else {
    begin += 2;
  }
  var end = document.cookie.indexOf(";", begin);
  if (end == -1) end = dc.length;
  return unescape(dc.substring(begin + prefix.length, end));
}

function saveScroll() {
  if (!scroll) return;
  var now = new Date();
  now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
  var x = $(window).scrollLeft();
  var y = $(window).scrollTop();
  setCookie("xy", x + "_" + y, now);
}

function loadScroll() {
  if (!scroll) return;
  var xy = getCookie("xy");
    console.log(xy);
  if (!xy) return;
  var ar = xy.split("_");
  if (ar.length == 2) scrollTo(parseInt(ar[0]), parseInt(ar[1]));
}


// -->
</SCRIPT>


</head>
<body onLoad="loadScroll()" onUnload="saveScroll()">

<div id="outer">
    <div id="header">
        <img id="logo" src="<?=base()?>/images/osg_logo.png" alt="myosg logo"/>
        <h1><a href="<?=base()?>"><?=config()->app_name?></a></h1>
        <h2><?=config()->app_subname?></h2>
    </div>

    <?function default_url($page) {
        $param = "";
        switch($page) {
        case 'wizard':
            $param = "?all_resources=on&gridtype=on&gridtype_1=on&summary_attrs_showservice=on&summary_attrs_showrsvstatus=on&summary_attrs_showfqdn=on&gip_status_attrs_showfqdn=on&gip_status_attrs_showtestresults=on";break;
        case 'scsummary':
            $param = "?datasource=summary&summary_attrs_showdesc=on&all_scs=on&active=on&active_value=1";break;
        case 'vosummary':
            $param = "?datasource=summary&all_vos=on&active_value=1";break;
        case 'map':
            $param = "?all_sites=on&active=on&active_value=1&disable_value=1";break;
        }
        
        return htmlentities(base()."/".$page.$param);
    }?>

    <div class="submenu">
        <span id="menu_about"><a href="<?=default_url("about")?>">Home</a></span>
        <span id="menu_wizard"><a href="<?=default_url("wizard")?>">Resource</a></span>
        <span id="menu_sc"><a href="<?=default_url("scsummary")?>">Support Center</a></span>
        <span id="menu_vo"><a href="<?=default_url("vosummary")?>">Virtual Organization</a></span>
        <span id="menu_map"><a href="<?=default_url("map")?>">Status Map</a></span>
    </div>

    <script type="text/javascript">
        $("#menu_<?=$this->menu_selected?>").addClass("selected");
    </script>
    <div id="content">
<?
    if(config()->banner) {
        echo "<div id=\"banner\">".config()->banner."</div>";
    }
    if(config()->debug) {
        exec("svn info | grep \"Revision:\" |  awk '{print $2}'", $out);
        echo "<p class=\"warning\">Running in Debug mode -- Version ".config()->version." (Rev. ".$out[0].")</p>";
    }
?>

